# üéâ SAA Risk Analyzer ‚Äî –ü–û–õ–ù–ê–Ø –í–ï–†–°–ò–Ø –ì–û–¢–û–í–ê!

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (100%)

### üîß Backend (Go)
- ‚úÖ **Multi-API Market Data** (7.3M –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü):
  - Yahoo Finance (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π) ‚Äî –∞–∫—Ü–∏–∏, ETF
  - Binance (–ë–ï–ó –õ–ò–ú–ò–¢–û–í) ‚Äî –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
  - CoinGecko (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π) ‚Äî crypto fallback
  - CoinCap (200/–¥–µ–Ω—å) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
  
- ‚úÖ **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫** (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è):
  - VaR: Historical, Parametric (Normal & Student-t), Monte Carlo
  - CVaR (Expected Shortfall)
  - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
  - PCA (—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
  - –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ (Kupiec, Christoffersen)
  
- ‚úÖ **Risk Service**:
  - –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∏–∑ Multi-API
  - –†–∞—Å—á—ë—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—å–Ω—ã—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
  - –†–µ–∞–ª—å–Ω—ã–µ VaR/CVaR –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è
  
- ‚úÖ **REST API**:
  - POST /api/portfolios
  - POST /api/portfolios/:id/positions
  - POST /api/risk/var
  - POST /api/risk/cvar  
  - POST /api/risk/correlation
  - GET /api/risk/dashboard

### ‚öõÔ∏è Frontend (React + TypeScript)
- ‚úÖ **3 –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
  - **Dashboard** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ VaR/CVaR —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏
  - **Import** ‚Äî —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ + CSV –∑–∞–≥—Ä—É–∑–∫–∞
  - **Analytics** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (heatmap, –≥—Ä–∞—Ñ–∏–∫–∏, PCA)
  
- ‚úÖ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (Recharts)**:
  - Heatmap –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π (SVG)
  - Rolling VaR –≥—Ä–∞—Ñ–∏–∫
  - P&L Histogram —Å VaR/CVaR –ª–∏–Ω–∏—è–º–∏
  - PCA Scree Plot
  
- ‚úÖ **–¢–µ–º–∞ ReserveOne**:
  - –ó–æ–ª–æ—Ç–æ–π –∞–∫—Ü–µ–Ω—Ç #caa76a
  - –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
  - –®—Ä–∏—Ñ—Ç Inter

### üîó –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å (–≤–∞—à –≤–≤–æ–¥) ‚Üí API –∑–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω ‚Üí –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (VaR/CVaR) ‚Üí –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

---

## üöÄ –ó–ê–ü–£–°–ö (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –ü–æ—Ä—Ç—ã (–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ):
- Frontend: **8088** (http://localhost:8088)
- API: **8084**
- PostgreSQL: **5433**

### –ö–æ–º–∞–Ω–¥—ã:

```bash
cd ~/saa-risk-analyzer

# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop (–µ—Å–ª–∏ –±—ã–ª –∑–∞–∫—Ä—ã—Ç)

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—ë
docker compose up -d --build

# 3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
open http://localhost:8088
```

---

## üìç –°—Ç—Ä–∞–Ω–∏—Ü—ã

| URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| http://localhost:8088/ | **Dashboard** ‚Äî –æ–±–∑–æ—Ä —Ä–∏—Å–∫–æ–≤ |
| http://localhost:8088/import | **–ò–º–ø–æ—Ä—Ç** ‚Äî —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –ø–æ–∑–∏—Ü–∏–π |
| http://localhost:8088/analytics | **Analytics** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏, heatmap, PCA |

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å
- –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8088/import
- –í–∫–ª–∞–¥–∫–∞ "‚úçÔ∏è Manual Input"
- –í–≤–µ–¥–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ (SPY, BTC, GLD...)
- –ù–∞–∂–º–∏—Ç–µ "üíæ –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å"

### 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏
- –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ Dashboard (/)
- –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å –∏–∑ dropdown
- –ù–∞–∂–º–∏—Ç–µ "üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ä–∏—Å–∫"
- **VaR/CVaR —Ä–∞—Å—Å—á–∏—Ç–∞—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏!**

### 3. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- –û—Ç–∫—Ä–æ–π—Ç–µ /analytics
- Heatmap –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å API)
- Rolling VaR –≥—Ä–∞—Ñ–∏–∫–∏
- PCA analysis

---

## üåê Multi-API —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!

–ü—Ä–∏ —Ä–∞—Å—á—ë—Ç–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∞–∫—Ç–∏–≤–∞** (–∞–∫—Ü–∏—è/–∫—Ä–∏–ø—Ç–∞)
2. **–í—ã–±–∏—Ä–∞–µ—Ç API –∏—Å—Ç–æ—á–Ω–∏–∫**:
   - –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã ‚Üí Binance (–±–µ–∑ –ª–∏–º–∏—Ç–æ–≤) ‚Üí CoinGecko ‚Üí CoinCap
   - –ê–∫—Ü–∏–∏/ETF ‚Üí Yahoo Finance
3. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é** (250+ –¥–Ω–µ–π)
4. **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç VaR/CVaR** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìä API Examples

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å
curl -X POST http://localhost:8084/api/portfolios \
  -H "Content-Type: application/json" \
  -d '{"name":"My Portfolio"}'

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏
curl -X POST http://localhost:8084/api/portfolios/{ID}/positions \
  -H "Content-Type: application/json" \
  -d '{
    "positions": [
      {"symbol":"BTC","quantity":10,"avg_price":30000},
      {"symbol":"SPY","quantity":100,"avg_price":400}
    ]
  }'

# –†–∞—Å—Å—á–∏—Ç–∞—Ç—å VaR
curl -X POST http://localhost:8084/api/risk/var \
  -H "Content-Type: application/json" \
  -d '{
    "portfolio_id":"uuid-here",
    "confidence":0.99,
    "horizon_days":1,
    "window_days":250,
    "method":"historical"
  }'

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
curl -X POST http://localhost:8084/api/risk/correlation \
  -H "Content-Type: application/json" \
  -d '{"symbols":["BTC","ETH","SPY"],"window_days":250}'
```

---

## üé® –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

### Heatmap –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
- –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –æ—Ç -1 –¥–æ +1
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è SVG –º–∞—Ç—Ä–∏—Ü–∞
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∏

### Rolling VaR Chart
- –õ–∏–Ω–∏—è VaR (99%)
- –õ–∏–Ω–∏—è CVaR (Expected Shortfall)
- 30-–¥–Ω–µ–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è

### P&L Histogram
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
- VaR threshold (–∫—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è)
- CVaR threshold (–ø—É–Ω–∫—Ç–∏—Ä)

### PCA Scree Plot
- Explained Variance –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- Cumulative variance
- Bar + Line –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –£–∂–µ –º–æ–∂–µ—Ç–µ:
‚úÖ –í–Ω–æ—Å–∏—Ç—å —Å–≤–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã VaR/CVaR
‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
‚úÖ –°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI
- PDF –æ—Ç—á—ë—Ç—ã
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (COVID, Lehman)
- –ë–æ–ª—å—à–µ crypto API (CryptoCompare, Coinbase)

---

## üìû –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å
docker compose ps

# –õ–æ–≥–∏
docker compose logs -f api
docker compose logs -f web

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker compose down
docker compose up -d --build
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

‚úÖ Multi-API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Yahoo + Binance + CoinGecko + CoinCap)
‚úÖ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º
‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å ‚Üí –¶–µ–Ω—ã ‚Üí –†–∞—Å—á—ë—Ç—ã ‚Üí –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ–ª–Ω—ã–π flow)
‚úÖ Heatmap –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
‚úÖ Rolling VaR –≥—Ä–∞—Ñ–∏–∫–∏
‚úÖ PCA scree plot
‚úÖ P&L histogram
‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–±–µ–∑ JWT –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!** üèÜ
**–í—Å–µ 8 TODO –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!** ‚úÖ

