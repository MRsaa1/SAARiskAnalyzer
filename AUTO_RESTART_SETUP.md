# üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

Backend –∏ Frontend –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞** –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Å –ø–æ–º–æ—â—å—é macOS LaunchAgents.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Backend**: –ø–æ—Ä—Ç `8084`
- **Frontend**: –ø–æ—Ä—Ç `3000`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `risk_db` –Ω–∞ PostgreSQL
- **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫**: –≤–∫–ª—é—á–µ–Ω
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º**: 10 —Å–µ–∫—É–Ω–¥

## üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `manage-services.sh`:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ —Ä–∞–±–æ—Ç—É API
./manage-services.sh status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./manage-services.sh restart

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
./manage-services.sh logs

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./manage-services.sh test

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./manage-services.sh stop

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./manage-services.sh start
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
./test-auto-restart.sh
```

–¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –£–±—å–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å backend (kill -9)
3. –ü–æ–¥–æ–∂–¥–µ—Ç 15 —Å–µ–∫—É–Ω–¥
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ~10 —Å–µ–∫—É–Ω–¥

## üìç –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

LaunchAgents —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤:
- `~/Library/LaunchAgents/com.saa.backend.plist`
- `~/Library/LaunchAgents/com.saa.frontend.plist`

## üìù –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- **Backend**: `~/saa-risk-analyzer/backend_error.log`
- **Frontend**: `~/saa-risk-analyzer/frontend_error.log`

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
tail -f ~/saa-risk-analyzer/backend_error.log
```

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ LaunchAgent –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

```xml
<key>KeepAlive</key>
<dict>
    <key>SuccessfulExit</key>
    <false/>  <!-- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –µ—Å–ª–∏ —É–ø–∞–ª -->
    <key>Crashed</key>
    <true/>   <!-- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∫—Ä–∞—à–µ -->
</dict>

<key>ThrottleInterval</key>
<integer>10</integer>  <!-- –ó–∞–¥–µ—Ä–∂–∫–∞ 10 —Å–µ–∫—É–Ω–¥ -->
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∫—Ä–∞—à–µ
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ 10 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã (`RunAtLoad`)

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:
- **Backend API**: http://localhost:8084/api/dashboard
- **Frontend**: http://localhost:3000
- **Health Check**: http://localhost:8084/api/health

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ LaunchAgent):

```bash
APP_ENV=development
PORT=8084
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=risk_db
DB_SSLMODE=disable
JWT_SECRET=saa_risk_analyzer_super_secret_key
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=Admin123456!
CORS_ALLOW_ORIGINS=*
```

## üöÄ –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ Mac

LaunchAgents —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã.

–ß—Ç–æ–±—ã **–æ—Ç–∫–ª—é—á–∏—Ç—å** –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É:
```bash
./manage-services.sh uninstall
```

–ß—Ç–æ–±—ã **–≤–∫–ª—é—á–∏—Ç—å** –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –æ–±—Ä–∞—Ç–Ω–æ:
```bash
./manage-services.sh install
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backend –æ—Ç–≤–µ—á–∞–µ—Ç
curl http://localhost:8084/api/dashboard

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ frontend —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:3000

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã —Å–ª—É—à–∞—é—Ç
lsof -i :8084 -i :3000
```

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   ./manage-services.sh logs
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
   ```bash
   brew services list | grep postgresql
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞:
   ```bash
   /opt/homebrew/opt/postgresql@15/bin/psql -l | grep risk_db
   ```

### Backend –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–∞–¥–∞–µ—Ç

1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫:
   ```bash
   tail -50 ~/saa-risk-analyzer/backend_error.log
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:
   ```bash
   /opt/homebrew/opt/postgresql@15/bin/psql -U postgres -d risk_db -c "SELECT 1"
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL:
   ```bash
   brew services restart postgresql@15
   ```

### –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª:
```bash
nano ~/Library/LaunchAgents/com.saa.backend.plist
```

–ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `PORT` –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ:
```bash
launchctl unload ~/Library/LaunchAgents/com.saa.backend.plist
launchctl load ~/Library/LaunchAgents/com.saa.backend.plist
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

- ‚úÖ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ (~10 —Å–µ–∫)
- ‚úÖ Frontend –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ API –æ—Ç–≤–µ—á–∞–µ—Ç –∏ –æ—Ç–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã

